#include<iostream>
#include<string>
#include<vector>
#include"Calc.h"
#include"reverse_polish_notation.h"
using namespace std;

int get_norm_input() {
	while (true) {
		int value;
		cin >> value;
		if (cin.fail() or value <= 0 or value>=4) {
			cout << "Введено либо не число , либо число вышло за допустимые значения , повторите ввод : ";
			cin.clear();
			cin.ignore(32767, '\n');
		}
		else
			return value;
	}
}

int main() {
	setlocale(LC_ALL, "rus");
	int f;
	string OPZ;
	string expression;
	cout << "Выберете тип чисел для работы :" << '\n';
	cout << " Комплексные числа  - 1" << '\n';
	cout << " Рациональные числа - 2" << '\n';
	cout << " Длинная арифметика - 3" << '\n';
	cout << "Введите ключ : ";
	f = get_norm_input();
	if (f == 1) 
		cout << "Формат ввода ( [a,b] ) , где  a и b рациональные числа вида ****.****  " << endl;
	cin >> expression;
	vector<char> operators{ '-','+','/','*','!' };
	vector<int> priorities{ 0,0,1,1,2 };
	try {
		OPZ = reverse_polish_notation(expression, operators, priorities);
		if (f == 1) {
			complex_calc(OPZ);
		}
	}
	catch (exception& ex) {
		cout<<ex.what()<<endl;
	}
	system("pause");
	return 0;
}
